<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSRU Staff Burnout Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .admin-panel {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 2px solid #e0e0e0;
            display: none;
        }
        
        .admin-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            z-index: 1000;
            font-size: 12px;
        }
        
        .content {
            padding: 30px;
        }
        
        .section-header {
            background: #f8f9fa;
            padding: 15px 20px;
            margin: 30px -30px 20px -30px;
            border-left: 4px solid #667eea;
            font-weight: bold;
            font-size: 1.2em;
            color: #333;
        }
        
        .question {
            margin-bottom: 25px;
            padding: 20px;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            background: #fafafa;
            transition: all 0.3s ease;
        }
        
        .question:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102,126,234,0.1);
        }
        
        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .question.required h3:after {
            content: " *";
            color: #dc3545;
        }
        
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .option {
            flex: 1;
            min-width: 120px;
        }
        
        .option input[type="radio"] {
            display: none;
        }
        
        .option label {
            display: block;
            padding: 12px 15px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }
        
        .option input[type="radio"]:checked + label {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .option label:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .scale-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }
        
        .scale-labels {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
        
        .textarea-container textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        .textarea-container textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }
        
        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 30px 0;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102,126,234,0.3);
        }
        
        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .results {
            display: none;
            margin-top: 30px;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }
        
        .results.green {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .results.amber {
            background: linear-gradient(135deg, #fc7f00 0%, #ffc107 100%);
            color: white;
        }
        
        .results.red {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
        }
        
        .results h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .results .score {
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .results .message {
            font-size: 1.2em;
            margin-bottom: 25px;
            font-style: italic;
        }
        
        .recommendations {
            text-align: left;
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .recommendations h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .recommendations ul {
            list-style: none;
            padding: 0;
        }
        
        .recommendations li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .recommendations li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        .download-section {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .download-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin: 0 10px;
        }
        
        .download-btn:hover {
            background: #218838;
        }
        
        .response-count {
            background: #007bff;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px;
            font-weight: bold;
        }
        
        @media (max-width: 600px) {
            .options {
                flex-direction: column;
            }
            
            .option {
                min-width: auto;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            .content {
                padding: 20px;
            }
            
            .section-header {
                margin: 20px -20px 15px -20px;
                padding: 12px 15px;
            }
        }
    </style>
</head>
<body>
    <button class="admin-toggle" onclick="toggleAdmin()">Admin</button>
    
    <div class="container">
        <div class="header">
            <h1>üè• OSRU Staff Burnout Assessment</h1>
            <p>This concise, anonymous assessment evaluates stress and burnout levels among OSRU ward personnel. Your responses help develop effective wellbeing strategies.</p>
            <p><strong>Estimated completion time: 3‚Äì5 minutes | All responses are confidential</strong></p>
        </div>
        
        <div id="adminPanel" class="admin-panel">
            <h3>üìä Administration Panel</h3>
            <div class="response-count" id="responseCount">Responses: 0</div>
            <div class="download-section">
                <button class="download-btn" onclick="downloadCSV()">üì• Download All Responses (CSV)</button>
                <button class="download-btn" onclick="downloadSummary()">üìà Download Summary Report</button>
                <button class="download-btn" onclick="clearData()" style="background: #dc3545;">üóëÔ∏è Clear All Data</button>
            </div>
        </div>
        
        <div class="content">
            <form id="burnoutForm">
                <div class="section-header">Section 1: Demographic Information (Optional)</div>
                
                <div class="question">
                    <h3>1. What is your professional role?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q1" value="Nurse" id="q1_1">
                            <label for="q1_1">Nurse</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="Care Assistant" id="q1_2">
                            <label for="q1_2">Care Assistant</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="Nutritional Assistant" id="q1_3">
                            <label for="q1_3">Nutritional Assistant</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>2. How long have you been employed in the OSRU ward?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q2" value="Less than 6 months" id="q2_1">
                            <label for="q2_1">Less than 6 months</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="6 months to 1 year" id="q2_2">
                            <label for="q2_2">6 months to 1 year</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="1‚Äì5 years" id="q2_3">
                            <label for="q2_3">1‚Äì5 years</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="More than 5 years" id="q2_4">
                            <label for="q2_4">More than 5 years</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>3. What type of shift do you predominantly work?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q3" value="Day" id="q3_1">
                            <label for="q3_1">Day</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="Night" id="q3_2">
                            <label for="q3_2">Night</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="Rotating" id="q3_3">
                            <label for="q3_3">Rotating</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="Other" id="q3_4">
                            <label for="q3_4">Other</label>
                        </div>
                    </div>
                </div>

                <div class="section-header">Section 2: Burnout Indicators</div>

                <div class="question required">
                    <h3>4. How frequently do you feel emotionally drained after completing your work shift?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q4" value="1" id="q4_1">
                            <label for="q4_1">Never</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="2" id="q4_2">
                            <label for="q4_2">Occasionally</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="3" id="q4_3">
                            <label for="q4_3">Frequently</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="4" id="q4_4">
                            <label for="q4_4">Always</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>5. Do you believe you have sufficient time to perform your job effectively?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q5" value="1" id="q5_1">
                            <label for="q5_1">Always</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="2" id="q5_2">
                            <label for="q5_2">Most of the time</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="3" id="q5_3">
                            <label for="q5_3">Rarely</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="4" id="q5_4">
                            <label for="q5_4">Never</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>6. Do you feel that your work has a positive impact?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q6" value="1" id="q6_1">
                            <label for="q6_1">Always</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="2" id="q6_2">
                            <label for="q6_2">Often</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="3" id="q6_3">
                            <label for="q6_3">Seldom</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="4" id="q6_4">
                            <label for="q6_4">Never</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>7. Have you noticed an increase in cynicism or detachment from patients or colleagues?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q7" value="1" id="q7_1">
                            <label for="q7_1">Never</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="2" id="q7_2">
                            <label for="q7_2">Occasionally</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="3" id="q7_3">
                            <label for="q7_3">Frequently</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="4" id="q7_4">
                            <label for="q7_4">Always</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>8. I feel emotionally drained by my work.</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q8" value="1" id="q8_1">
                            <label for="q8_1">Strongly Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="2" id="q8_2">
                            <label for="q8_2">Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="3" id="q8_3">
                            <label for="q8_3">Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="4" id="q8_4">
                            <label for="q8_4">Strongly Agree</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>9. I experience fatigue at the conclusion of most shifts.</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q9" value="1" id="q9_1">
                            <label for="q9_1">Strongly Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="2" id="q9_2">
                            <label for="q9_2">Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="3" id="q9_3">
                            <label for="q9_3">Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="4" id="q9_4">
                            <label for="q9_4">Strongly Agree</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>10. I find it challenging to concentrate while performing my duties.</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q10" value="1" id="q10_1">
                            <label for="q10_1">Strongly Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="2" id="q10_2">
                            <label for="q10_2">Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="3" id="q10_3">
                            <label for="q10_3">Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="4" id="q10_4">
                            <label for="q10_4">Strongly Agree</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>11. I feel detached or indifferent towards patients.</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q11" value="1" id="q11_1">
                            <label for="q11_1">Strongly Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q11" value="2" id="q11_2">
                            <label for="q11_2">Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q11" value="3" id="q11_3">
                            <label for="q11_3">Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q11" value="4" id="q11_4">
                            <label for="q11_4">Strongly Agree</label>
                        </div>
                    </div>
                </div>

                <div class="section-header">Section 3: Self-Perception of Burnout</div>

                <div class="question required">
                    <h3>12. Do you believe you are currently experiencing burnout?</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q12" value="1" id="q12_1">
                            <label for="q12_1">No</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q12" value="2" id="q12_2">
                            <label for="q12_2">Unsure</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q12" value="3" id="q12_3">
                            <label for="q12_3">Yes</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>13. On a scale from 1 to 10, how would you assess your current stress level at work?</h3>
                    <p style="margin-bottom: 15px; color: #666;">(1 = Not stressed at all, 10 = Extremely stressed)</p>
                    <div class="scale-container">
                        <input type="range" name="q13" min="1" max="10" value="5" id="stressScale" style="width: 100%; height: 30px;">
                        <div class="scale-labels">
                            <span>1 - Not stressed</span>
                            <span id="scaleValue">5</span>
                            <span>10 - Extremely stressed</span>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>14. I feel supported by my team.</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q14" value="1" id="q14_1">
                            <label for="q14_1">Strongly Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" value="2" id="q14_2">
                            <label for="q14_2">Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" value="3" id="q14_3">
                            <label for="q14_3">Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" value="4" id="q14_4">
                            <label for="q14_4">Strongly Disagree</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>15. I experience poor sleep quality due to work-related stress.</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q15" value="1" id="q15_1">
                            <label for="q15_1">Strongly Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" value="2" id="q15_2">
                            <label for="q15_2">Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" value="3" id="q15_3">
                            <label for="q15_3">Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" value="4" id="q15_4">
                            <label for="q15_4">Strongly Agree</label>
                        </div>
                    </div>
                </div>

                <div class="question required">
                    <h3>16. I feel enthusiasm about coming to work.</h3>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q16" value="1" id="q16_1">
                            <label for="q16_1">Strongly Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" value="2" id="q16_2">
                            <label for="q16_2">Agree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" value="3" id="q16_3">
                            <label for="q16_3">Disagree</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" value="4" id="q16_4">
                            <label for="q16_4">Strongly Disagree</label>
                        </div>
                    </div>
                </div>

                <div class="section-header">Section 4: Open Feedback (Optional)</div>

                <div class="question">
                    <h3>17. Is there any specific factor contributing to your stress or burnout in the OSRU ward?</h3>
                    <div class="textarea-container">
                        <textarea name="q17" placeholder="Please share any specific factors you'd like us to know about..."></textarea>
                    </div>
                </div>

                <div class="question">
                    <h3>18. What measures would enhance your sense of support in your role?</h3>
                    <div class="textarea-container">
                        <textarea name="q18" placeholder="Please suggest what would help you feel more supported..."></textarea>
                    </div>
                </div>

                <button type="button" class="submit-btn" onclick="submitAssessment()">
                    üîç Complete Assessment & Get My Results
                </button>
            </form>

            <div id="results" class="results">
                <h2 id="resultTitle"></h2>
                <div class="score" id="scoreDisplay"></div>
                <div class="message" id="resultMessage"></div>
                <div class="recommendations" id="recommendations"></div>
            </div>
        </div>
    </div>

    <script>
        // Update stress scale display
        document.getElementById('stressScale').addEventListener('input', function() {
            document.getElementById('scaleValue').textContent = this.value;
        });

        // Admin panel toggle
        function toggleAdmin() {
            const panel = document.getElementById('adminPanel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
            updateResponseCount();
        }

        // Store responses in localStorage
        function storeResponse(responseData) {
            let responses = JSON.parse(localStorage.getItem('osru_responses') || '[]');
            responseData.timestamp = new Date().toISOString();
            responseData.id = 'resp_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            responses.push(responseData);
            localStorage.setItem('osru_responses', JSON.stringify(responses));
        }

        // Update response count
        function updateResponseCount() {
            const responses = JSON.parse(localStorage.getItem('osru_responses') || '[]');
            document.getElementById('responseCount').textContent = `Responses: ${responses.length}`;
        }

        // Submit assessment
        function submitAssessment() {
            const form = document.getElementById('burnoutForm');
            const formData = new FormData(form);
            
            // Check required fields
            const requiredQuestions = ['q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q12', 'q13', 'q14', 'q15', 'q16'];
            for (let question of requiredQuestions) {
                const value = formData.get(question);
                if (!value) {
                    alert(`Please answer question ${question.replace('q', '')} to complete the assessment.`);
                    return;
                }
            }
            
            // Collect all response data
            const responseData = {};
            for (let [key, value] of formData.entries()) {
                responseData[key] = value;
            }
            
            // Store response
            storeResponse(responseData);
            
            // Calculate burnout score for feedback
            const scoreableQuestions = ['q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q14', 'q15', 'q16'];
            let totalScore = 0;
            
            for (let question of scoreableQuestions) {
                totalScore += parseInt(responseData[question]);
            }
            
            displayResults(totalScore, responseData);
        }
        
        function displayResults(score, responseData) {
            const resultsDiv = document.getElementById('results');
            const resultTitle = document.getElementById('resultTitle');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const resultMessage = document.getElementById('resultMessage');
            const recommendations = document.getElementById('recommendations');
            
            scoreDisplay.textContent = `Your Burnout Score: ${score}/44`;
            
            let category, title, message, recs;
            
            if (score >= 11 && score <= 18) {
                category = 'green';
                title = 'üü¢ GREEN - Low Risk';
                message = "You're doing well. Let's keep it that way!";
                recs = `
                    <h3>‚úÖ Suggested Actions:</h3>
                    <ul>
                        <li>Continue healthy habits‚Äîdon't wait for burnout to start</li>
                        <li>Use quick stress release exercises during breaks</li>
                        <li>Encourage peer connection and open conversation</li>
                    </ul>
                    <h3>üß† Mental Health Tips:</h3>
                    <ul>
                        <li>Gratitude journaling (3 things you're grateful for at the end of each shift)</li>
                        <li>Mindful breathing‚Äî3 minutes daily (Box breathing: 4-in, 4-hold, 4-out, 4-hold)</li>
                        <li>Digital detox‚Äî30 mins off screens before bed</li>
                    </ul>
                    <h3>üí™ Physical Exercises:</h3>
                    <ul>
                        <li>Neck and shoulder rolls between patients</li>
                        <li>5-minute walk/stretch outside during lunch</li>
                        <li>Progressive muscle relaxation before sleep</li>
                    </ul>
                    <h3>üå± Nutrition & Lifestyle:</h3>
                    <ul>
                        <li>Stay hydrated‚Äîbring a water bottle to work</li>
                        <li>Balanced meals with protein and whole grains</li>
                        <li>Avoid caffeine after 3pm</li>
                    </ul>
                `;
            } else if (score >= 19 && score <= 33) {
                category = 'amber';
                title = 'üü† AMBER - Moderate Risk';
                message = "You're at risk of burnout. Take small, proactive steps now.";
                recs = `
                    <h3>‚úÖ Suggested Actions:</h3>
                    <ul>
                        <li>Talk to a trusted colleague or supervisor</li>
                        <li>Make small changes to reduce mental load</li>
                        <li>Use short daily wellbeing check-ins (2-5 mins)</li>
                    </ul>
                    <h3>üß† Mental Health Tips:</h3>
                    <ul>
                        <li>5-4-3-2-1 grounding technique (for anxiety/stress)</li>
                        <li>Limit shift-related rumination (journal and 'leave it on the page')</li>
                        <li>Listen to calming music on commute home</li>
                    </ul>
                    <h3>üí™ Physical Exercises:</h3>
                    <ul>
                        <li>Desk yoga or stretch breaks (2 mins hourly)</li>
                        <li>Breathing reset: inhale for 4, exhale for 6 (repeat x5)</li>
                        <li>10-min walk after work to signal shift end</li>
                    </ul>
                    <h3>üå± Nutrition & Lifestyle:</h3>
                    <ul>
                        <li>Cut down on sugary snacks‚Äîswap with fruit or nuts</li>
                        <li>Prioritise sleep hygiene (same bedtime/wake time daily)</li>
                        <li>Limit alcohol and increase magnesium-rich foods (spinach, almonds)</li>
                    </ul>
                `;
            } else {
                category = 'red';
                title = 'üî¥ RED - High Risk';
                message = "You're showing signs of burnout. Please take action now.";
                recs = `
                    <h3>‚úÖ Suggested Actions:</h3>
                    <ul>
                        <li>Self-refer to Occupational Health or EAP</li>
                        <li>Speak with line manager or wellbeing lead confidentially</li>
                        <li>Consider booking a few days off if feasible</li>
                    </ul>
                    <h3>üß† Mental Health Support:</h3>
                    <ul>
                        <li>Seek professional support (Occupational Health, GP, therapist)</li>
                        <li>Try guided meditation apps like Calm or Headspace (NHS discounts often available)</li>
                        <li>Reduce "toxic positivity"‚Äîit's okay to say you're struggling</li>
                    </ul>
                    <h3>üí™ Physical Exercises:</h3>
                    <ul>
                        <li>Yoga for stress (Yoga with Adriene‚Äî10-minute stress relief)</li>
                        <li>Try restorative movement: walking in nature, stretching on the floor</li>
                        <li>Prioritise sleep and rest, even over exercise</li>
                    </ul>
                    <h3>üå± Nutrition & Lifestyle:</h3>
                    <ul>
                        <li>Stay hydrated and avoid energy drinks</li>
                        <li>Meal prep to reduce decision fatigue</li>
                        <li>Take 20 minutes of "non-doing" (zero productivity, just be)</li>
                    </ul>
                `;
            }
            
            resultTitle.textContent = title;
            resultMessage.textContent = message;
            recommendations.innerHTML = recs;
            
            resultsDiv.className = `results ${category}`;
            resultsDiv.style.display = 'block';
            
            // Add stress level context
            const stressLevel = parseInt(responseData.q13);
            const stressContext = document.createElement('div');
            stressContext.style.marginTop = '15px';
            stressContext.innerHTML = `<p><strong>Your stress level:</strong> ${stressLevel}/10 ${getStressDescription(stressLevel)}</p>`;
            scoreDisplay.appendChild(stressContext);
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
            
            // Update response count
            updateResponseCount();
        }
        
        function getStressDescription(level) {
            if (level <= 3) return "(Low stress - well managed)";
            if (level <= 5) return "(Moderate stress - manageable)";
            if (level <= 7) return "(Elevated stress - needs attention)";
            return "(High stress - immediate action needed)";
        }
        
        // Download CSV function
        function downloadCSV() {
            const responses = JSON.parse(localStorage.getItem('osru_responses') || '[]');
            if (responses.length === 0) {
                alert('No responses to download yet.');
                return;
            }
            
            const headers = [
                'ID', 'Timestamp', 'Role', 'Employment_Length', 'Shift_Type',
                'Q4_Emotional_Drain', 'Q5_Sufficient_Time', 'Q6_Positive_Impact', 'Q7_Cynicism',
                'Q8_Emotionally_Drained', 'Q9_Fatigue', 'Q10_Concentration', 'Q11_Detachment',
                'Q12_Experiencing_Burnout', 'Q13_Stress_Level', 'Q14_Team_Support', 'Q15_Sleep_Quality',
                'Q16_Work_Enthusiasm', 'Q17_Stress_Factors', 'Q18_Support_Measures', 'Burnout_Score', 'Risk_Category'
            ];
            
            let csvContent = headers.join(',') + '\\n';
            
            responses.forEach(response => {
                const scoreableQuestions = ['q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q14', 'q15', 'q16'];
                let burnoutScore = 0;
                for (let q of scoreableQuestions) {
                    if (response[q]) burnoutScore += parseInt(response[q]);
                }
                
                let riskCategory = 'Green';
                if (burnoutScore >= 19 && burnoutScore <= 33) riskCategory = 'Amber';
                else if (burnoutScore > 33) riskCategory = 'Red';
                
                const row = [
                    response.id,
                    response.timestamp,
                    response.q1 || '',
                    response.q2 || '',
                    response.q3 || '',
                    response.q4 || '',
                    response.q5 || '',
                    response.q6 || '',
                    response.q7 || '',
                    response.q8 || '',
                    response.q9 || '',
                    response.q10 || '',
                    response.q11 || '',
                    response.q12 || '',
                    response.q13 || '',
                    response.q14 || '',
                    response.q15 || '',
                    response.q16 || '',
                    (response.q17 || '').replace(/,/g, ';').replace(/\\n/g, ' '),
                    (response.q18 || '').replace(/,/g, ';').replace(/\\n/g, ' '),
                    burnoutScore,
                    riskCategory
                ].map(field => `"${field}"`);
                
                csvContent += row.join(',') + '\\n';
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `OSRU_Burnout_Responses_${new Date().toISOString().slice(0, 10)}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
        
        // Download summary report
        function downloadSummary() {
            const responses = JSON.parse(localStorage.getItem('osru_responses') || '[]');
            if (responses.length === 0) {
                alert('No responses to analyze yet.');
                return;
            }
            
            // Calculate summary statistics
            let greenCount = 0, amberCount = 0, redCount = 0;
            let totalBurnoutScore = 0;
            let totalStressScore = 0;
            let roleBreakdown = {};
            
            responses.forEach(response => {
                const scoreableQuestions = ['q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q14', 'q15', 'q16'];
                let burnoutScore = 0;
                for (let q of scoreableQuestions) {
                    if (response[q]) burnoutScore += parseInt(response[q]);
                }
                
                totalBurnoutScore += burnoutScore;
                totalStressScore += parseInt(response.q13 || 0);
                
                if (burnoutScore >= 11 && burnoutScore <= 18) greenCount++;
                else if (burnoutScore >= 19 && burnoutScore <= 33) amberCount++;
                else redCount++;
                
                const role = response.q1 || 'Unknown';
                roleBreakdown[role] = (roleBreakdown[role] || 0) + 1;
            });
            
            const avgBurnoutScore = (totalBurnoutScore / responses.length).toFixed(1);
            const avgStressScore = (totalStressScore / responses.length).toFixed(1);
            
            const summaryReport = `
OSRU Staff Burnout Assessment - Summary Report
Generated: ${new Date().toLocaleString()}

OVERVIEW
========
Total Responses: ${responses.length}
Average Burnout Score: ${avgBurnoutScore}/44
Average Stress Level: ${avgStressScore}/10

RISK CATEGORIES
==============
üü¢ Green (Low Risk): ${greenCount} (${((greenCount/responses.length)*100).toFixed(1)}%)
üü† Amber (Moderate Risk): ${amberCount} (${((amberCount/responses.length)*100).toFixed(1)}%)
üî¥ Red (High Risk): ${redCount} (${((redCount/responses.length)*100).toFixed(1)}%)

ROLE BREAKDOWN
=============
${Object.entries(roleBreakdown).map(([role, count]) => `${role}: ${count} (${((count/responses.length)*100).toFixed(1)}%)`).join('\\n')}

RECOMMENDATIONS
==============
${redCount > 0 ? `üö® URGENT: ${redCount} staff showing signs of burnout - immediate intervention needed` : ''}
${amberCount > responses.length * 0.3 ? `‚ö†Ô∏è WARNING: ${((amberCount/responses.length)*100).toFixed(1)}% of staff at moderate risk` : ''}
${avgStressScore > 6 ? `üìä High average stress level (${avgStressScore}/10) - ward-wide stress management needed` : ''}

For detailed analysis, download the full CSV data.
            `;
            
            const blob = new Blob([summaryReport], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `OSRU_Burnout_Summary_${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
        
        // Clear all data
        function clearData() {
            if (confirm('Are you sure you want to delete all response data? This cannot be undone.')) {
                localStorage.removeItem('osru_responses');
                updateResponseCount();
                alert('All response data has been cleared.');
            }
        }
        
        // Initialize response count on page load
        updateResponseCount();
    </script>
</body>
</html>

